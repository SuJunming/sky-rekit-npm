import request from "@request";
import { message } from "antd";
export const Login = {
  state: {
    data: [],
  },
  reducers: {
    setData(state: any, payload: any) {
      return { ...state, data: payload };
    },
  },
  effects: (dispatch: any) => ({
    login: async function (params: any) {
      const data = await request.post(
        `/aicloud/authorization/api/v1/login/dologin`,
        params
      );
      message.success("登录成功");
      dispatch.Login.setData(data);
      dispatch.Common.setUser(data);
    },
  }),
};
